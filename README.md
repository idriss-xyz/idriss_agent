# IDRISS AI Token Finder for Farcaster

## Getting Started

- Make sure you have Python 3.11.10
- Make sure you have Poetry installed

### Installation and Setup for Development

```shell
git clone https://github.com/victorpolisetty/idriss_project.git
cd visualisation_station
poetry env use 3.11.10
poetry install && poetry shell
make install
```

## How to run agent

```shell
./scripts/run_single_agent.sh victorpolisetty/idriss_frontend --force
```
Warning: Docker must be running

## How to run frontend (tested using Brave Browser)

```shell
http://localhost:5555/
```

## How to generate DB file

```shell
cd packages/victorpolisetty/customs/idriss_token_finder/database
python db_setup.db
```

## How to deploy

Work in progress...

## Commands

Here are common commands you might need while working with the project:

### Resetting Docker

```shell
curl localhost:8080/hard_reset
```

### Database Structure

Table Name: AnalyzeRequest

Table Columns:

wallet_address -> A unique wallet address which identifies the user STRING

count -> How many casts you want the SearchCaster API to search through INT

text -> What keywords you want the SearchCaster API to look for STRING

engagement -> What filters you want the SearchCaster API to sort by (one of: ["reactions","recasts","replies","watches"]) STRING

prompt -> Prompt that the user inputted STRING

![Screenshot 2025-01-23 at 1 33 49 PM](https://github.com/user-attachments/assets/a2c65f52-5dc7-4574-9b21-eb9bb02bc30f)

## API Endpoints

- /api/analyze (POST)
  
  Request Body:
  JSON object as shown query and wallet_address required.
  
  ![Screenshot 2025-01-21 at 8 34 01 PM](https://github.com/user-attachments/assets/f6688ee8-7abf-4ed2-b0cb-cc44108206b5)

  Responses:
  
  200: Returns a string representing the results of the analysis with keys message, parameters, suggestion, first_ticker, results.

  message -> success message
  parameters -> parameters fed into the searchcaster API
  
  suggestion -> suggestion generated by GPT if it thinks more info could yield better results
  
  first_ticker -> ticker of the coin that best matches the prompt
  
  results -> the casts from farcaster analyzed
  
  400: Returns an error message when the request is malformed or missing required fields (e.g., missing query).

  ![Screenshot 2025-01-21 at 8 43 43 PM](https://github.com/user-attachments/assets/d2159bd8-3217-4185-b696-45a3e11151ab)

  ![Screenshot 2025-01-23 at 10 59 12 AM](https://github.com/user-attachments/assets/d2dc9b19-c598-43ad-a85e-51f15a97d53a)

  ![Screenshot 2025-01-23 at 1 59 01 PM](https://github.com/user-attachments/assets/9a211614-b97e-4709-ae0f-14d9cafcaf3b)

- /api/user/{walletAddress} (GET)
  
  Path Parameter:
  
  walletAddress (string, required) – The unique identifier for the user.
  
  Responses:
  
  200: Returns user information, including wallet address, engagement, text, and count.
  
  404: Returns an error message if the wallet address does not exist in the database.
  
  400: Returns an error message when the request is malformed.

  ![Screenshot 2025-01-21 at 8 38 25 PM](https://github.com/user-attachments/assets/f134974f-1bc7-4571-9499-19c1356672d4)

- /api/wallet/{walletAddress} (GET)

  Path Parameter:

  walletAddress (string, required) – The wallet address to check in the database.

  Responses:

  200: Returns SearchCaster API results along with associated parameters and the first ticker (e.g., $SOCIAL).
  
  404: Returns an error message if the wallet address is not found in the database.
  
  500: Returns an error message for any internal server errors.

  ![Screenshot 2025-01-21 at 8 41 54 PM](https://github.com/user-attachments/assets/874cc8ce-b937-4676-80b8-63afa4e62e16)

### When to use API's

Use the /api/analyze (POST) endpoint when a user is using natural language to search for a new coin.

Use the /api/wallet/{walletAddress} (GET) endpoint when we want to retain the users original query and just rescan for any updates.

### Formatting

```shell
make fmt
```

### Linting

```shell
make lint
```

### Testing

```shell
make test
```

### Locking

```shell
make hashes
```

### all

```shell
make all
```

## License

This project is licensed under the [Apache License 2.0](https://www.apache.org/licenses/LICENSE-2.0)

